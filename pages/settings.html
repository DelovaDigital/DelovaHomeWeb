<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instellingen - DelovaHome</title>
    <link rel="stylesheet" href="../style/base.css">
    <script>/* Prevent white flash */(function(){var t=localStorage.getItem('theme');if(t==='dark'){document.documentElement.style.background='#0f172a';document.documentElement.style.color='#f8fafc';if(document.body)document.body.style.background='#0f172a';}else{document.documentElement.style.background='#f8fafc';document.documentElement.style.color='#1e293b';if(document.body)document.body.style.background='#f8fafc';}})();</script>
    <script>(function(){var theme=localStorage.getItem('theme');var href=(theme==='dark'?'../style/style-dark.css':'../style/style.css');var l=document.createElement('link');l.rel='stylesheet';l.id='theme-stylesheet';l.href=href;document.head.appendChild(l);})();</script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <nav class="main-nav">
            <!-- Navigation will be loaded here -->
        </nav>

        <main class="content-area">
            <header class="page-header">
                <h2>Instellingen</h2>
                <p>Beheer je account en voorkeuren</p>
            </header>

            <div class="settings-container">
                <!-- Sidebar -->
                <aside class="settings-sidebar">
                    <div class="settings-nav-item active" data-target="general">
                        <i class="fas fa-sliders-h"></i> <span data-i18n="general">Algemeen</span>
                    </div>
                    <div class="settings-nav-item" data-target="profile">
                        <i class="fas fa-user-circle"></i> <span data-i18n="profile">Profiel</span>
                    </div>
                    <div class="settings-nav-item" data-target="users">
                        <i class="fas fa-users"></i> <span data-i18n="users">Gebruikers</span>
                    </div>
                    <div class="settings-nav-item" data-target="integrations">
                        <i class="fas fa-plug"></i> <span data-i18n="integrations">Integraties</span>
                    </div>
                    <div class="settings-nav-item" data-target="cloud">
                        <i class="fas fa-cloud"></i> <span data-i18n="cloud">Cloud & Remote</span>
                    </div>
                    <div class="settings-nav-item" data-target="energy">
                        <i class="fas fa-bolt"></i> <span data-i18n="energy">Energie</span>
                    </div>
                    <div class="settings-nav-item" data-target="knx">
                        <i class="fas fa-network-wired"></i> <span data-i18n="knx">KNX</span>
                    </div>
                    <div class="settings-nav-item" data-target="scenes">
                        <i class="fas fa-magic"></i> <span data-i18n="scenes">Scenes</span>
                    </div>
                    <div class="settings-nav-item" data-target="developer">
                        <i class="fas fa-code"></i> <span data-i18n="developer">Developer</span>
                    </div>
                    <div class="settings-nav-item" data-target="maintenance">
                        <i class="fas fa-tools"></i> <span data-i18n="maintenance">Onderhoud</span>
                    </div>
                </aside>

                <!-- Content -->
                <div class="settings-content">
                    
                    <!-- General Section -->
                    <div id="general" class="settings-section active">
                        <!-- Hub Info Card -->
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-server"></i>
                                <h3 data-i18n="hub_info">Hub Informatie</h3>
                            </div>
                            <div class="card-body">
                                <div class="info-row">
                                    <span class="label" data-i18n="hub_name">Hub Naam:</span>
                                    <span class="value" id="hubName">Laden...</span>
                                </div>
                                <div class="info-row">
                                    <span class="label" data-i18n="hub_id">Hub ID:</span>
                                    <span class="value" id="hubId">Laden...</span>
                                </div>
                                <div class="info-row">
                                    <span class="label" data-i18n="version">Versie:</span>
                                    <span class="value" id="hubVersion">Laden...</span>
                                </div>
                                <div class="info-row">
                                    <span class="label" data-i18n="status">Status:</span>
                                    <span class="value status-online"><i class="fas fa-circle"></i> <span data-i18n="online">Online</span></span>
                                </div>
                            </div>
                        </div>

                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-brain"></i>
                                <h3 data-i18n="smart_features">Smart Features</h3>
                            </div>
                            <div class="card-body">
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="adaptive_lighting">Adaptive Lighting</span>
                                        <span class="setting-desc" data-i18n="adaptive_lighting_desc">Past kleurtemperatuur lampen aan op basis van tijd.</span>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="featureAdaptiveLighting">
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="auto_climate_control">Auto Climate Control</span>
                                        <span class="setting-desc" data-i18n="auto_climate_control_desc">Beheer verwarming op basis van aanwezigheid.</span>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="featureClimate">
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="energy_saver">Energy Saver (Standby Killer)</span>
                                        <span class="setting-desc" data-i18n="energy_saver_desc">Schakel ongebruikte apparaten automatisch uit.</span>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="featureEnergy">
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="security_system">Security System</span>
                                        <span class="setting-desc" data-i18n="security_system_desc">Activeer monitoring en alarmsensoren.</span>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="featureSecurity">
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Preferences -->
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-paint-brush"></i>
                                <h3 data-i18n="preferences">Voorkeuren</h3>
                            </div>
                            <div class="card-body">
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="dark_mode">Donkere modus</span>
                                        <span class="setting-desc" data-i18n="dark_mode_desc">Schakel donker thema in</span>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="darkModeToggle">
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="timezone">Tijdzone</span>
                                        <span class="setting-desc" data-i18n="timezone_desc">Selecteer de tijdzone van je locatie</span>
                                    </div>
                                    <select id="timezoneSelect" class="form-input" style="width: auto;" onchange="updateTimezone(this.value)">
                                        <option value="Europe/Brussels">Brussels (CET/CEST)</option>
                                        <option value="Europe/London">London (GMT/BST)</option>
                                        <option value="America/New_York">New York (EST/EDT)</option>
                                        <option value="America/Los_Angeles">Los Angeles (PST/PDT)</option>
                                        <option value="Asia/Tokyo">Tokyo (JST)</option>
                                        <option value="UTC">UTC</option>
                                    </select>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="language">Taal</span>
                                        <span class="setting-desc" data-i18n="language_desc">Selecteer de taal van de interface</span>
                                    </div>
                                    <select id="languageSelect" style="padding: 8px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg); color: var(--text);">
                                        <option value="nl">Nederlands</option>
                                        <option value="en">English</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Info / Updates -->
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fa-solid fa-circle-info"></i>
                                <h3 data-i18n="system_updates">Systeem Updates</h3>
                            </div>
                            <div class="card-body">
                                <p>DelovaHub Versie 1.0.0</p>
                                <p>Beta</p>
                                <button type="submit" class="btn btn-primary" id="btnCheckForUpdates" data-i18n="check_updates">Check for updates</button>
                                <p style="margin-top: 10px; font-size: 0.8em; color: #888;">© 2026 DelovaHub. Alle rechten voorbehouden.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Section -->
                    <div id="profile" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-user-shield"></i>
                                <h3 data-i18n="account_settings">Account Instellingen</h3>
                            </div>
                            <div class="card-body">
                                <div class="info-row">
                                    <span class="label" data-i18n="username">Gebruikersnaam:</span>
                                    <span class="value" id="profileUsername">Laden...</span>
                                </div>
                                <div class="info-row">
                                    <span class="label" data-i18n="role">Rol:</span>
                                    <span class="value" data-i18n="admin">Beheerder</span>
                                </div>
                                
                                <hr style="margin: 20px 0; border: 0; border-top: 1px solid var(--border);">
                                
                                <h4 data-i18n="change_password">Wachtwoord Wijzigen</h4>
                                <form id="change-password-form" style="margin-top: 15px;">
                                    <div class="form-group">
                                        <label for="current-pass" data-i18n="current_password">Huidig Wachtwoord</label>
                                        <input type="password" id="current-pass" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="new-pass" data-i18n="new_password">Nieuw Wachtwoord</label>
                                        <input type="password" id="new-pass" required minlength="6">
                                    </div>
                                    <div class="form-group">
                                        <label for="confirm-pass" data-i18n="confirm_password">Bevestig Nieuw Wachtwoord</label>
                                        <input type="password" id="confirm-pass" required minlength="6">
                                    </div>
                                    <button type="submit" class="btn btn-primary" data-i18n="update_password">Wachtwoord Bijwerken</button>
                                </form>

                                <hr style="margin: 20px 0; border: 0; border-top: 1px solid var(--border);">
                                <button class="btn btn-danger" id="btnProfileLogout" style="width: 100%;">
                                    <i class="fas fa-sign-out-alt"></i> <span data-i18n="logout">Uitloggen</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Users Section -->
                    <div id="users" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-users-cog"></i>
                                <h3 data-i18n="user_management">Gebruikersbeheer</h3>
                                <button class="btn btn-primary btn-sm" id="btnAddUser" style="margin-left: auto;">
                                    <i class="fas fa-plus"></i> <span data-i18n="add_user">Gebruiker toevoegen</span>
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table" id="usersTable" style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="text-align: left; border-bottom: 1px solid var(--border);">
                                                <th style="padding: 10px;" data-i18n="username">Gebruikersnaam</th>
                                                <th style="padding: 10px;" data-i18n="role">Rol</th>
                                                <th style="padding: 10px;" data-i18n="created_at">Aangemaakt</th>
                                                <th style="padding: 10px;" data-i18n="actions">Acties</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Users loaded via JS -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Integrations Section -->
                    <div id="integrations" class="settings-section">
                        <!-- Spotify Integration -->
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fab fa-spotify"></i>
                                <h3 data-i18n="spotify">Spotify</h3>
                            </div>
                            <div class="card-body">
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9em;" data-i18n="spotify_desc">
                                    Koppel je Spotify account om muziek te bedienen via de Hub.
                                </p>
                                <div id="spotify-status-container" style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                    <div id="spotify-status-indicator" style="width: 12px; height: 12px; border-radius: 50%; background-color: #ccc;"></div>
                                    <span id="spotify-status-text" data-i18n="spotify_not_connected">Niet verbonden</span>
                                </div>
                                <button id="btn-spotify-action" class="btn btn-primary" data-i18n="connect">Verbinden</button>
                            </div>
                        </div>

                        <!-- Apple Device Pairing -->
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fab fa-apple"></i>
                                <h3 data-i18n="apple_pairing">Apple Apparaat Koppelen</h3>
                            </div>
                            <div class="card-body">
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9em;" data-i18n="apple_pairing_desc">
                                    Koppel een Apple TV of Mac (AirPlay Receiver) om deze te bedienen.
                                </p>
                                <div id="atv-pairing-step-1">
                                    <div class="form-group">
                                        <label for="atv-ip" data-i18n="ip_address">IP Adres</label>
                                        <input type="text" id="atv-ip" placeholder="192.168.0.x">
                                    </div>
                                    <button id="btn-start-pairing" class="btn btn-primary" data-i18n="start_pairing">Start Koppelen</button>
                                </div>
                                <div id="atv-pairing-step-2" style="display:none;">
                                    <p>Voer de PIN code in die op je TV verschijnt:</p>
                                    <div class="form-group">
                                        <label for="atv-pin" data-i18n="pin_code">PIN Code</label>
                                        <input type="text" id="atv-pin" placeholder="1234" maxlength="4">
                                    </div>
                                    <button id="btn-submit-pin" class="btn btn-primary" data-i18n="send_pin">Verstuur PIN</button>
                                </div>
                                <div id="atv-pairing-status" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        </div>

                        <!-- NAS Pairing -->
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-hdd"></i>
                                <h3 data-i18n="nas_pairing">NAS Koppelen</h3>
                            </div>
                            <div class="card-body">
                                <form id="nas-form" onsubmit="event.preventDefault();">
                                    <div class="form-group">
                                        <label for="nas-host" data-i18n="host_ip">Host / IP</label>
                                        <input type="text" id="nas-host" placeholder="192.168.0.x">
                                    </div>
                                    <div class="form-group">
                                        <label for="nas-share" data-i18n="share_name">Share Naam</label>
                                        <input type="text" id="nas-share" placeholder="public">
                                    </div>
                                    <div class="form-group">
                                        <label for="nas-domain" data-i18n="domain">Domein (Optioneel)</label>
                                        <input type="text" id="nas-domain" placeholder="WORKGROUP">
                                    </div>
                                    <div class="form-group">
                                        <label for="nas-user" data-i18n="username">Gebruikersnaam</label>
                                        <input type="text" id="nas-user" placeholder="admin">
                                    </div>
                                    <div class="form-group">
                                        <label for="nas-pass" data-i18n="password">Wachtwoord</label>
                                        <input type="password" id="nas-pass" placeholder="••••••">
                                    </div>
                                    <button id="btn-add-nas" class="btn btn-primary" data-i18n="connect">Verbinden</button>
                                </form>
                                <div id="nas-status" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        </div>

                        <!-- Computer/Server Pairing -->
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-terminal"></i>
                                <h3 data-i18n="computer_pairing">Computer/Server Koppelen</h3>
                            </div>
                            <div class="card-body">
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9em;" data-i18n="computer_pairing_desc">
                                    Koppel een Mac, Linux PC, Server of Raspberry Pi via SSH voor bediening.
                                </p>
                                <form id="ssh-form" onsubmit="event.preventDefault();">
                                    <div class="form-group">
                                        <label for="ssh-ip" data-i18n="ip_address">IP Adres</label>
                                        <input type="text" id="ssh-ip" placeholder="192.168.0.x" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="ssh-type" data-i18n="device_type">Type</label>
                                        <select id="ssh-type" required>
                                            <option value="mac">Mac</option>
                                            <option value="pc">Windows PC</option>
                                            <option value="linux">Linux PC</option>
                                            <option value="server">Server</option>
                                            <option value="rpi">Raspberry Pi</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="ssh-user" data-i18n="username">Gebruikersnaam</label>
                                        <input type="text" id="ssh-user" placeholder="user" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="ssh-pass" data-i18n="password">Wachtwoord</label>
                                        <input type="password" id="ssh-pass" placeholder="••••••" required>
                                    </div>
                                    <button id="btn-pair-ssh" class="btn btn-primary" data-i18n="connect">Verbinden</button>
                                </form>
                                <div id="ssh-status" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Cloud Section -->
                    <div id="cloud" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-cloud"></i>
                                <h3 data-i18n="cloud_settings">Cloud & Remote Access</h3>
                            </div>
                            <div class="card-body">
                                <p style="margin-bottom: 20px; color: var(--text-muted);" data-i18n="cloud_desc">
                                    Link your hub to a DelovaHome Cloud Server to access it remotely without port forwarding.
                                </p>

                                <div id="cloud-status-container" style="margin-bottom: 20px; padding: 15px; background: rgba(0,123,255,0.1); border-radius: 8px; display: none;">
                                    <strong>Status:</strong> <span id="cloud-status-text" style="color: var(--primary);">Linked</span>
                                    <br>
                                    <small id="cloud-hub-id" style="color: var(--text-muted);"></small>
                                </div>

                                <form id="cloud-form" onsubmit="event.preventDefault();">
                                    <div class="form-group">
                                        <label for="cloud-url">Cloud Server URL</label>
                                        <input type="text" id="cloud-url" value="https://cloud.delovahome.com" placeholder="https://your-cloud-server.com">
                                    </div>

                                    <div class="tabs" style="display: flex; gap: 10px; margin-bottom: 15px;">
                                        <button type="button" class="btn btn-secondary active" id="tab-cloud-login" onclick="toggleCloudSettingsTab('login')" data-i18n="login">Login</button>
                                        <button type="button" class="btn btn-secondary" id="tab-cloud-register" onclick="toggleCloudSettingsTab('register')" data-i18n="register">Register</button>
                                    </div>

                                    <div class="form-group">
                                        <label for="cloud-user">Username</label>
                                        <input type="text" id="cloud-user" placeholder="Username">
                                    </div>

                                    <div class="form-group" id="cloud-email-group" style="display: none;">
                                        <label for="cloud-email">Email</label>
                                        <input type="email" id="cloud-email" placeholder="user@example.com">
                                    </div>

                                    <div class="form-group">
                                        <label for="cloud-pass">Password</label>
                                        <input type="password" id="cloud-pass" placeholder="Password">
                                    </div>

                                    <button id="btn-link-cloud" class="btn btn-primary" onclick="linkCloudSettings()">Link Hub</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Energy Section -->
                    <div id="energy" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-solar-panel"></i>
                                <h3 data-i18n="solar_energy">Zonnepanelen & Energie</h3>
                            </div>
                            <div class="card-body">
                                <form id="energy-form" onsubmit="event.preventDefault();">
                                    <div class="form-group">
                                        <label for="solar-capacity" data-i18n="solar_capacity">Capaciteit Zonnepanelen (W)</label>
                                        <input type="number" id="solar-capacity" placeholder="4000">
                                    </div>
                                    <div class="form-group">
                                        <label for="grid-limit" data-i18n="grid_limit">Netlimiet (W)</label>
                                        <input type="number" id="grid-limit" placeholder="5000">
                                    </div>
                                    <div class="form-group">
                                        <label for="cost-kwh" data-i18n="cost_kwh">Kosten per kWh (€)</label>
                                        <input type="number" step="0.01" id="cost-kwh" placeholder="0.25">
                                    </div>
                                    <button id="btn-save-energy" class="btn btn-primary" data-i18n="save">Opslaan</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- KNX Section -->
                    <div id="knx" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-network-wired"></i>
                                <h3 data-i18n="knx_gateway">KNX Gateway</h3>
                            </div>
                            <div class="card-body">
                                <form id="knx-form" onsubmit="event.preventDefault();">
                                    <div class="form-group">
                                        <label for="knx-ip" data-i18n="gateway_ip">Gateway IP Adres</label>
                                        <input type="text" id="knx-ip" placeholder="192.168.0.x">
                                    </div>
                                    <div class="form-group">
                                        <label for="knx-port" data-i18n="port">Poort</label>
                                        <input type="number" id="knx-port" placeholder="3671" value="3671">
                                    </div>
                                    <div class="form-group">
                                        <label for="knx-phys" data-i18n="phys_addr">Fysiek Adres (Client)</label>
                                        <input type="text" id="knx-phys" placeholder="1.1.128" value="1.1.128">
                                    </div>
                                    <button id="btn-save-knx" class="btn btn-primary" data-i18n="connect_save">Verbinden & Opslaan</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Scenes Section -->
                    <div id="scenes" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-magic"></i>
                                <h3 data-i18n="scenes_device_setup">Scene Apparaten Setup</h3>
                            </div>
                            <div class="card-body">
                                <p style="margin-bottom: 20px; opacity: 0.8;" data-i18n="scenes_desc">Selecteer welk fysiek apparaat overeenkomt met de functie in de scene.</p>
                                <div id="scene-mappings-container" class="grid-layout" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;">
                                    <!-- Populated via JS -->
                                    <div class="loading-spinner"></div>
                                </div>
                                <div class="form-actions" style="margin-top: 20px; text-align: right;">
                                    <button id="btn-save-mappings" class="btn btn-primary" data-i18n="save">Opslaan</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Developer Section -->
                    <div id="developer" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-flask"></i>
                                <h3 data-i18n="simulation_tools">Simulation Tools</h3>
                            </div>
                            <div class="card-body">
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="simulate_doorbell">Simulate Doorbell</span>
                                        <span class="setting-desc" data-i18n="simulate_doorbell_desc">Triggers standard doorbell notification/event.</span>
                                    </div>
                                    <button class="btn btn-secondary" onclick="simulateEvent('doorbell')" data-i18n="trigger">Trigger</button>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="simulate_motion">Simulate Motion</span>
                                        <span class="setting-desc" data-i18n="simulate_motion_desc">Triggers motion event in a simulated room.</span>
                                    </div>
                                    <button class="btn btn-secondary" onclick="simulateEvent('motion')" data-i18n="trigger">Trigger</button>
                                </div>
                                 <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="simulate_leak">Simulate Leak</span>
                                        <span class="setting-desc" data-i18n="simulate_leak_desc">Triggers critical water leak alert.</span>
                                    </div>
                                    <button class="btn btn-secondary" onclick="simulateEvent('leak')" data-i18n="trigger">Trigger</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Maintenance Section -->
                    <div id="maintenance" class="settings-section">
                        <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-save"></i>
                                <h3 data-i18n="backup_restore">Backup & Restore</h3>
                            </div>
                            <div class="card-body">
                                <p style="margin-bottom: 20px; opacity: 0.8;" data-i18n="backup_restore_desc">
                                    Download een back-up van je configuratie of herstel een eerdere versie.
                                    Dit bevat je instellingen, scenes, kamers en apparaten.
                                </p>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="download_config">Configuratie Downloaden</span>
                                        <span class="setting-desc" data-i18n="download_config_desc">Download een .json bestand met al je data.</span>
                                    </div>
                                    <a href="/api/backup/download" class="btn btn-primary" target="_blank" data-i18n="download_backup">
                                        <i class="fas fa-download"></i> Download Backup
                                    </a>
                                </div>

                                <div class="setting-item" style="border-top: 1px solid var(--border); padding-top: 15px; margin-top: 15px;">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="restore_backup">Back-up Herstellen</span>
                                        <span class="setting-desc" data-i18n="restore_backup_desc">Upload een back-up bestand om te herstellen.</span>
                                    </div>
                                    <div style="display: flex; gap: 10px; align-items: center;">
                                        <input type="file" id="backupFile" accept=".json" style="max-width: 200px;">
                                        <button id="btnRestore" class="btn btn-danger" data-i18n="restore">
                                            <i class="fas fa-upload"></i> Restore
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                         <div class="card settings-card">
                            <div class="card-header">
                                <i class="fas fa-power-off"></i>
                                <h3 data-i18n="system_actions">Systeem Acties</h3>
                            </div>
                            <div class="card-body">
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <span class="setting-label" data-i18n="restart_hub">Herstart Hub</span>
                                        <span class="setting-desc" data-i18n="restart_hub_desc">Herstart de server service.</span>
                                    </div>
                                    <button onclick="systemAction('restart')" class="btn btn-secondary" data-i18n="restart_button">Herstarten</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>
    <script src="../script/script.js"></script>
    <script src="../script/i18n.js"></script>
    <script src="../script/script2.js"></script>
    <script src="../script/settings.js"></script>    <!-- Add User Modal -->
    <div id="addUserModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
        <div class="modal-content" style="background-color: var(--card); margin: 15% auto; padding: 20px; border: 1px solid var(--border); width: 80%; max-width: 500px; border-radius: 10px;">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3 data-i18n="add_user">Gebruiker toevoegen</h3>
                <span class="close" id="closeAddUserModal" style="cursor: pointer; font-size: 24px;">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label for="newUsername" style="display: block; margin-bottom: 5px;" data-i18n="username">Gebruikersnaam</label>
                        <input type="text" id="newUsername" class="form-control" required style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid var(--border); background: var(--bg); color: var(--text);">
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label for="newPassword" style="display: block; margin-bottom: 5px;" data-i18n="password">Wachtwoord</label>
                        <input type="password" id="newPassword" class="form-control" required style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid var(--border); background: var(--bg); color: var(--text);">
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label for="newRole" style="display: block; margin-bottom: 5px;" data-i18n="role">Rol</label>
                        <select id="newRole" class="form-control" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid var(--border); background: var(--bg); color: var(--text);">
                            <option value="User">Bewoner (User)</option>
                            <option value="Admin">Beheerder (Admin)</option>
                            <option value="Guest">Gast (Guest)</option>
                        </select>
                    </div>
                    <div style="text-align: right;">
                        <button type="submit" class="btn btn-primary" data-i18n="save">Opslaan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="../script/script.js"></script>
    <script src="../script/i18n.js"></script>
    <script src="../script/settings.js"></script>
    <script src="../script/animations.js"></script>
</body>
</html>